let carsInfo = {
    "brands" : [
      {
        "id": 1,
        "name": "Honda",
        "cars": [
          {
            "id": 101,
            "name": "Honda City 2025",
            "price": "46.6 - 59.0 lacs",
            "mileage": "12 to 16 km/l",
            "transmission": "Automatic & Manual",
            "fuelType": "Petrol",
            "engine": "1199 cc to 1497 cc",
            "colors": [
              {
                "name": "White",
                "image": "https://cache1.pakwheels.com/system/car_generation_pictures/6425/original/Honda_City_Front.jpg?1651424945"
              },
              {
                "name": "Black",
                "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQcIzfzp-JXHrw-xyGXL5qvZQE5WdlRVIK7Ig&s"
              }
            ]
          },
          {
            "id": 102,
            "name": "Honda Civic 2025",
            "price": "86.6 - 99.0 lacs",
            "mileage": "11 to 14 km/l",
            "transmission": "Automatic",
            "fuelType": "Petrol",
            "engine": "1498 cc",
            "colors": [
              {
                "name": "Silver",
                "image": "https://cache4.pakwheels.com/system/car_generation_pictures/7370/original/Cover.jpg?1677570254"
              },
              {
                "name": "Black",
                "image": "https://cache4.pakwheels.com/system/car_generation_pictures/7370/original/Cover.jpg?1677570254"
              }
            ]
          },
          {
            "id": 103,
            "name": "Honda BR-V",
            "price": "63.0 lacs",
            "mileage": "11 to 14 km/l",
            "transmission": "Automatic",
            "fuelType": "Petrol",
            "engine": "1498 cc",
            "colors": [
              {
                "name": "Black",
                "image": "https://cache1.pakwheels.com/system/car_generation_pictures/6430/medium/Honda_BRV_Front.jpg?1652159445"
              },
              {
                "name": "Black",
                "image": "https://cache4.pakwheels.com/system/car_generation_pictures/7370/original/Cover.jpg?1677570254"
              }
            ]
          },
          {
            "id": 104,
            "name": "Honda HR-V",
            "price": "76.5 - 79.0 lacs",
            "mileage": "11 to 14 km/l",
            "transmission": "Automatic",
            "fuelType": "Petrol",
            "engine": "1498 cc",
            "colors": [
              {
                "name": "Red",
                "image": "https://cache1.pakwheels.com/system/car_generation_pictures/7250/medium/f.jpg?1667212296"
              },
              {
                "name": "Black",
                "image": "https://cache4.pakwheels.com/system/car_generation_pictures/7370/original/Cover.jpg?1677570254"
              }
            ]
          },
          {
            "id": 105,
            "name": "Honda Accord",
            "price": "2.3 crore",
            "mileage": "11 to 14 km/l",
            "transmission": "Automatic",
            "fuelType": "Petrol",
            "engine": "1498 cc",
            "colors": [
              {
                "name": "Red",
                "image": "https://cache2.pakwheels.com/system/car_generation_pictures/6831/medium/Honda_Accord_Front_Right_angled_.jpg?1663243625"
              },
              {
                "name": "Black",
                "image": "https://cache4.pakwheels.com/system/car_generation_pictures/7370/original/Cover.jpg?1677570254"
              }
            ]
          }
        ]
      },
      {
        "id": 2,
        "name": "Toyota",
        "cars": [
          {
            "id": 101,
            "name": "Toyota Yaris",
            "price": "44.8 - 63.2 lacs",
            "mileage": "12 to 16 km",
            "transmission": "Automatic & Manual",
            "fuelType": "Petrol",
            "engine": "1329 cc to 1496 cc",
            "colors": [
              {
                "name": "White",
                "image": "https://cache2.pakwheels.com/system/car_generation_pictures/8051/medium/Cover.jpg?1737968957"
              },
              {
                "name": "Black",
                "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQcIzfzp-JXHrw-xyGXL5qvZQE5WdlRVIK7Ig&s"
              }
            ]
          },
          {
            "id": 102,
            "name": "Toyota Corolla",
            "price": "59.7 - 75.5 lacs",
            "mileage": "10 to 17 km/l",
            "transmission": "Automatic",
            "fuelType": "Petrol",
            "engine": "1298 cc to 1800 cc",
            "colors": [
              {
                "name": "White",
                "image": "https://cache1.pakwheels.com/system/car_generation_pictures/5361/original/Corolla-X-Cars-Cropped-Pictures-for-Website.jpg?1606903674"
              },
              {
                "name": "Black",
                "image": "https://cache4.pakwheels.com/system/car_generation_pictures/7370/original/Cover.jpg?1677570254"
              }
            ]
          },
          {
            "id": 103,
            "name": "Toyota Hilux",
            "price": "1.1 - 1.54 crore",
            "mileage": "10 to 17 km/l",
            "transmission": "Automatic",
            "fuelType": "Petrol",
            "engine": "1298 cc to 1800 cc",
            "colors": [
              {
                "name": "Black",
                "image": "https://cache2.pakwheels.com/system/car_generation_pictures/6006/medium/Revo_-_PNG.png?1635483853"
              },
              {
                "name": "Black",
                "image": "https://cache4.pakwheels.com/system/car_generation_pictures/7370/original/Cover.jpg?1677570254"
              }
            ]
          },
          {
            "id": 104,
            "name": "Toyota Fortuner",
            "price": "1.45 - 1.99 crore",
            "mileage": "10 to 17 km/l",
            "transmission": "Automatic",
            "fuelType": "Petrol",
            "engine": "1298 cc to 1800 cc",
            "colors": [
              {
                "name": "Black",
                "image": "https://cache4.pakwheels.com/system/car_generation_pictures/7335/medium/Fortuner_-_PNG.png?1677568997"
              },
              {
                "name": "Black",
                "image": "https://cache4.pakwheels.com/system/car_generation_pictures/7370/original/Cover.jpg?1677570254"
              }
            ]
          },
          {
            "id": 105,
            "name": "Toyota Camry",
            "price": "3.0 crore",
            "mileage": "10 to 17 km/l",
            "transmission": "Automatic",
            "fuelType": "Petrol",
            "engine": "1298 cc to 1800 cc",
            "colors": [
              {
                "name": "White",
                "image": "https://cache2.pakwheels.com/system/car_generation_pictures/6423/medium/Toyota_Camry_Front.jpg?1651129122"
              },
              {
                "name": "Black",
                "image": "https://cache4.pakwheels.com/system/car_generation_pictures/7370/original/Cover.jpg?1677570254"
              }
            ]
          }
        ]
      }
    ]
};


let brandSelect = document.getElementById('brandSelect');
let carSelect = document.getElementById('carSelect');
let submitBtn = document.getElementById('submitBtn');
let brandList = [];
let tempCarList = [];
let carList = [];
for(let brand in carsInfo['brands']){
    brandList.push(carsInfo['brands'][brand].name)
    tempCarList[tempCarList.length] = carsInfo['brands'][brand]['cars']
};

tempCarList.forEach((v,i) => {
    for(let j =0; j < v.length; j++){
        carList.push(tempCarList[i][j])
    }
});

brandList.forEach((eachBrand) => {
    let brandOption = document.createElement('option');
    brandOption.value = eachBrand;
    brandOption.textContent = eachBrand;
    brandSelect.appendChild(brandOption)
})

window.onload = loadDataFn(carList)

function getAllCarsByBrands(brand){
    carSelect.innerHTML = `<option value="">Select Cars</option>`;
     carsInfo.brands.filter((p) => {
        if(p.name == brand){
            for(let i =0; i < p.cars.length; i++){
                let carOption = document.createElement('option');
                carOption.value = p.cars[i].name;
                carOption.textContent = p.cars[i].name;
                carSelect.appendChild(carOption)
            }
        }else{
            return ;
        };

     });
}
brandSelect.addEventListener('change' , () => {
    getAllCarsByBrands(brandSelect.value)
})

function updateCarList(brand,car){
    if(car == ""){
        let result = carsInfo['brands'].filter(p => p.name == brand) 
        carList = result[0].cars;
    }else{
        let carArray = carsInfo['brands'].filter(p => p.name == brand);
        let result = carArray[0]['cars'].filter(p => p.name == car);
        carList = result;
    }
    if(carList.length > 0) loadDataFn(carList);
    
}
submitBtn.addEventListener('click' , (e) => {
    e.preventDefault();
    let brand = brandSelect.value;
    let car = carSelect.value;
    updateCarList(brand,car);
})

function loadDataFn(dataList){
    cardContainer.innerHTML = ""
    if(dataList.length > 1){
        dataList.forEach((eachCar) => {
            cardContainer.innerHTML += `
                <div class="col-xl-4 col-lg-4 col-md-4 col-sm-12 bg-white border-1 rounded shadow-sm d-flex align-items-md-center justify-content-center flex-column">
                                <div class="img_div w-75 bg-black ">
                                     <img class="img-fluid" src="${eachCar.colors[0].image}" alt="">
                                 </div>
                                 <div class="row text-center">
                                     <h3>${eachCar.name}</h3>
                                     <p class=" text-success">PKR ${eachCar.price}</p>
                                 </div>
                </div>
            `
        })
    }else{
        dataList.forEach((eachCar) => {
            cardContainer.innerHTML += `
                <div class="singleCard d-flex  justify-content-center shadow-lg" style="height: 80vh;">
                    <div class="imgContainer border-5 border-black d-flex align-items-center justify-content-center col-lg-6 col-xl-6 col-md-6 col-sm-12">
                        <img class="img-fluid" src="${eachCar.colors[0].image}" alt="">
                    </div>
                    <div class="col-xl-5 col-lg-5 col-md-5 col-sm-12 d-flex flex-column justify-content-center" style="gap: 20px;">
                        <h4><span class="bg-dark text-white me-3">Name : </span>${eachCar.name}</h4>
                        <h4><span class="bg-dark text-white me-3">Price : </span>${eachCar.price}</h4>
                        <h4><span class="bg-dark text-white me-3">Engine : </span>${eachCar.engine}</h4>
                        <h4><span class="bg-dark text-white me-3">FuelType : </span>${eachCar.fuelType}</h4>
                        <h4><span class="bg-dark text-white me-3">Mileage : </span>${eachCar.mileage}</h4>
                    </div>
                </div>
            `
        })
    }
}
